Day15.球盒模型：回溯算法的两种视角

# 零、前言

## 更新日志：

> 2024-4-19：总结 零、前言 & 一、暴力穷举思维方法：球盒模型。

## 1.本文主要内容：

【1】今天内容是与 [Day14.一文秒杀所有排列组合子集问题](https://github.com/djsz3y/algorithm-labuladong/blob/master/Day14.一文秒杀所有排列组合子集问题.md) 不同的排列/组合/子集代码写法，

- 比如通过 swap 元素实现全排列，
- 还有没有 for 循环的子集解法代码。

【2】之前不提为了保持这些问题解法形式的一致性，一开始太多选择，容易迷糊。

【3】今天打卡，要阅读的主要内容：

- 介绍之前没有讲到的回溯算法写法
- 为什么可以那样写，
- 两种写法的本质区别是什么。

## 2.先说结论

1、**回溯算法穷举**的**本质思维模式**是「球盒模型」，一切回溯算法，皆从此出，别无二法。

2、**球盒模型**，必然有**两种穷举视角**，分别为「球」的视角穷举和「盒」的视角穷举，**对应**的，就是**两种不同的代码写法**。

3、从理论上分析，两种穷举视角**本质**上是**一样**的。但是**涉及**到**具体的代码**实现，两种写法的**复杂度**可能**有优劣**之分。你需要**选择效率更高的**写法。

球盒模型这个词是我随口编的，因为下面我会用「球」和「盒」两种视角来解释，你理解就好。

# 一、暴力穷举思维方法：球盒模型【done】

**一切暴力穷举算法，都从球盒模型开始，没有例外。**

> 懂了这个，就可以随心所欲运用暴力穷举算法

【1】回顾排列组合知识：

1、`P(n, k)`/`A(n, k)`表示：

- _从 n 个不同元素中拿出 k 个元素的排列（Permutation/Arrangement）总数_；

`C(n, k)` 表示：

- _从 n 个不同元素中拿出 k 个元素的组合（Combination）总数_。

2、「排列」和「组合」的**主要区别**在于：

- _是否考虑顺序的差异_。

3、排列、组合总数的**计算公式**：

```math
P(n, k) = n!/(n - k)!
```

```math
C(n, k) = n!/k!(n - k)!
```

【2】如何推导排列公式 `P(n, k)`？

> 组合数学的知识；  
> 从数学的角度介绍全排列穷举的两种视角。

[0]**排列组合问题**的**各种变体**都可以**抽象成**「球盒模型」，P(n, k) 就可以抽象成下面这个场景：

[1]首先，你可以站在**盒子的视角**，每个盒子必然要选择一个球。

- 选 1 盒，放 n 球中任一，剩下 n-k 个盒，在 n-k 个球中选择；

```math
P(n, k) = nP(n - 1, k - 1)
```

[2]另外，你也可以站在**球的视角**，因为**并不是每个球都会被装进盒子**，所以球的视角分**两种情况**：

- 1、first 球不装任意盒子，剩 n - 1 球放 k 盒。

- 2、first 球装 k 盒中任一个，剩 n - 1 球放 k - 1 盒。

结合两种情况，得：

```math
P(n, k) = P(n - 1, k) + kP(n - 1, k - 1)
```

[3]**两种视角得到两个不同递归式**，解开的结果都是熟知的阶乘形式：

```math
P(n, k)
= nP(n - 1, k - 1)
= P(n - 1, k) + kP(n - 1, k - 1)
= n!(n - k)!
```

[4]如何解递归式？

- 有兴趣自行学习组合数学相关知识。

# 二、用球盒模型重新理解全排列问题【todo】

# 三、用球盒模型重新理解子集问题

# 四、结论

# 总结

Day15.球盒模型：回溯算法的两种视角

## 更新日志：

> 2024-4-19：总结 零、前言 & 一、暴力穷举思维方法：球盒模型。

## 【收获 1】

【1】今天学习了 **球盒模型：回溯算法的两种视角** 技巧，以后遇到：

- [46. 全排列](https://leetcode.cn/problems/permutations/description/)
- [78. 子集](https://leetcode.cn/problems/subsets/description/)

【2】类型的题目，我可以按照：

- 球的视角，或者盒的视角，去想这两个问题。

的标准化步骤思考。

【3】今天先学习了 暴力穷举思维方法：球盒模型 的数学思维，今天没有做题，但明白了球盒模型来自数学思维中的排列组合问题：`P(n, k)`/`A(n, k)`、`C(n, k)`。

## 【收获 2】

今天输出了一篇打卡文章总结：

- [Day15.球盒模型：回溯算法的两种视角](https://github.com/djsz3y/algorithm-labuladong/blob/master/Day15.球盒模型：回溯算法的两种视角.md)

# 参考链接

- [LABULADONG 的算法网站](https://labuladong.online/algo/)
- 文章原文：[球盒模型：回溯算法穷举的两种视角](https://labuladong.online/algo/practice-in-action/two-views-of-backtrack-2/)
